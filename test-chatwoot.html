<!DOCTYPE html>
<html lang="mn">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chatwoot –¢–µ—Å—Ç - Cloud MN</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
        background-color: #f5f5f5;
      }
      .container {
        background: white;
        padding: 30px;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }
      .test-button {
        background: #2563eb;
        color: white;
        border: none;
        padding: 12px 24px;
        border-radius: 6px;
        cursor: pointer;
        margin: 10px;
        font-size: 14px;
      }
      .test-button:hover {
        background: #1d4ed8;
      }
      .status {
        padding: 15px;
        margin: 15px 0;
        border-radius: 6px;
        border-left: 4px solid #2563eb;
        background: #eff6ff;
      }
      .success {
        border-left-color: #10b981;
        background: #ecfdf5;
        color: #065f46;
      }
      .error {
        border-left-color: #ef4444;
        background: #fef2f2;
        color: #991b1b;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>ü§ñ Chatwoot –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏ –¢–µ—Å—Ç</h1>

      <div class="status" id="status">Chatwoot SDK –∞—á–∞–∞–ª–∂ –±–∞–π–Ω–∞...</div>

      <h2>–¢–µ—Å—Ç —Ç–æ–≤—á–Ω—É—É–¥:</h2>
      <button class="test-button" onclick="testChatwootWidget()">
        Chatwoot Widget –Ω—ç—ç—Ö
      </button>

      <button class="test-button" onclick="testWithCustomData()">
        Custom Data-—Ç–∞–π –Ω—ç—ç—Ö
      </button>

      <button class="test-button" onclick="checkSDKStatus()">
        SDK —Å—Ç–∞—Ç—É—Å —à–∞–ª–≥–∞—Ö
      </button>

      <h2>–¢–æ—Ö–∏—Ä–≥–æ–æ–Ω—ã –º—ç–¥—ç—ç–ª—ç–ª:</h2>
      <ul>
        <li><strong>Website Token:</strong> atrhYjQJmaBw5vCLzm5yTkHN</li>
        <li><strong>Base URL:</strong> https://app.chatwoot.com</li>
        <li><strong>SDK Path:</strong> /packs/js/sdk.js</li>
      </ul>

      <h2>–¢–µ—Å—Ç —Ö–∏–π—Ö –∑–∞–∞–≤–∞—Ä:</h2>
      <ol>
        <li>
          –≠–Ω—ç —Ö—É—É–¥–∞—Å –∞—á–∞–∞–ª–∞–≥–¥—Å–∞–Ω—ã –¥–∞—Ä–∞–∞ Chatwoot SDK –∞–≤—Ç–æ–º–∞—Ç–∞–∞—Ä –∞—á–∞–∞–ª–∞–≥–¥–∞–Ω–∞
        </li>
        <li>
          "Chatwoot Widget –Ω—ç—ç—Ö" —Ç–æ–≤—á–∏–π–≥ –¥–∞—Ä–∂ widget –Ω—ç—ç–≥–¥—ç—Ö —ç—Å—ç—Ö–∏–π–≥ —à–∞–ª–≥–∞–Ω–∞ —É—É
        </li>
        <li>Widget –¥—ç—ç—Ä –º–µ—Å—Å–µ–∂ –∏–ª–≥—ç—ç–∂ “Ø–∑–Ω—ç “Ø“Ø</li>
        <li>Chatwoot dashboard-–¥ –æ—Ä–∂ –º–µ—Å—Å–µ–∂ –∏—Ä—Å—ç–Ω —ç—Å—ç—Ö–∏–π–≥ —à–∞–ª–≥–∞–Ω–∞ —É—É</li>
      </ol>
    </div>

    <!-- Chatwoot SDK -->
    <script>
      // Debug –º—ç–¥—ç—ç–ª—ç–ª –Ω—ç–º—ç—Ö
      console.log("üöÄ Chatwoot SDK –∞—á–∞–∞–ª–∂ —ç—Ö—ç–ª–∂ –±–∞–π–Ω–∞...");

      (function (d, t) {
        var BASE_URL = "https://app.chatwoot.com";
        var g = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
        g.src = BASE_URL + "/packs/js/sdk.js";
        g.defer = true;
        g.async = true;
        s.parentNode.insertBefore(g, s);

        g.onload = function () {
          console.log("‚úÖ Chatwoot SDK script –∞—á–∞–∞–ª–∞–≥–¥–ª–∞–∞");

          // SDK –±—ç–ª—ç–Ω —ç—Å—ç—Ö–∏–π–≥ —à–∞–ª–≥–∞—Ö
          if (window.chatwootSDK) {
            console.log("‚úÖ chatwootSDK –æ–±—ä–µ–∫—Ç –æ–ª–¥–ª–æ–æ");

            try {
              window.chatwootSDK.run({
                websiteToken: "m7n7efjvbgpeyb3FhD6TdvAr",
                baseUrl: BASE_URL,
                locale: "mn",
                // –ù—ç–º—ç–ª—Ç —Ç–æ—Ö–∏—Ä–≥–æ–æ
                hideMessageBubble: false,
                position: "right",
                launcherTitle: "–ë–∏–¥—ç–Ω—Ç—ç–π —Ö–æ–ª–±–æ–≥–¥–æ—Ö",
              });

              console.log("‚úÖ Chatwoot SDK –∞–º–∂–∏–ª—Ç—Ç–∞–π —ç—Ö—ç–ª–ª—ç—ç");
              updateStatus(
                "Chatwoot SDK –∞–º–∂–∏–ª—Ç—Ç–∞–π –∞—á–∞–∞–ª–∞–≥–¥–ª–∞–∞! Widget —Ç–æ–≤—á–∏–π–≥ –¥–∞—Ä–∂ “Ø–∑–Ω—ç “Ø“Ø.",
                "success"
              );

              // Widget –±—ç–ª—ç–Ω —ç—Å—ç—Ö–∏–π–≥ —à–∞–ª–≥–∞—Ö
              setTimeout(() => {
                if (window.$chatwoot) {
                  console.log("‚úÖ $chatwoot –æ–±—ä–µ–∫—Ç –±—ç–ª—ç–Ω –±–∞–π–Ω–∞");
                  updateStatus(
                    "Widget –±—ç–ª—ç–Ω –±–∞–π–Ω–∞! –¢–æ–≤—á–∏–π–≥ –¥–∞—Ä–∂ –Ω—ç—ç–Ω—ç “Ø“Ø.",
                    "success"
                  );
                } else {
                  console.warn("‚ö†Ô∏è $chatwoot –æ–±—ä–µ–∫—Ç –æ–ª–¥—Å–æ–Ω–≥“Ø–π");
                }
              }, 2000);
            } catch (error) {
              console.error("‚ùå Chatwoot SDK —ç—Ö–ª“Ø“Ø–ª—ç—Ö—ç–¥ –∞–ª–¥–∞–∞:", error);
              updateStatus("SDK —ç—Ö–ª“Ø“Ø–ª—ç—Ö—ç–¥ –∞–ª–¥–∞–∞: " + error.message, "error");
            }
          } else {
            console.error("‚ùå chatwootSDK –æ–±—ä–µ–∫—Ç –æ–ª–¥—Å–æ–Ω–≥“Ø–π");
            updateStatus("chatwootSDK –æ–±—ä–µ–∫—Ç –æ–ª–¥—Å–æ–Ω–≥“Ø–π!", "error");
          }
        };

        g.onerror = function (error) {
          console.error("‚ùå Chatwoot SDK –∞—á–∞–∞–ª–∞—Ö–∞–¥ –∞–ª–¥–∞–∞:", error);
          updateStatus(
            "Chatwoot SDK –∞—á–∞–∞–ª–∞—Ö–∞–¥ –∞–ª–¥–∞–∞ –≥–∞—Ä–ª–∞–∞! –ò–Ω—Ç–µ—Ä–Ω–µ—Ç —Ö–æ–ª–±–æ–ª—Ç–æ–æ —à–∞–ª–≥–∞–Ω–∞ —É—É.",
            "error"
          );
        };

        // Timeout –Ω—ç–º—ç—Ö - 10 —Å–µ–∫—É–Ω–¥—ã–Ω –¥–∞—Ä–∞–∞ –∞—á–∞–∞–ª–∞–≥–¥–∞–∞–≥“Ø–π –±–æ–ª –∞–ª–¥–∞–∞
        setTimeout(() => {
          if (!window.chatwootSDK) {
            console.error("‚ùå Chatwoot SDK 10 —Å–µ–∫—É–Ω–¥—ã–Ω –¥–æ—Ç–æ—Ä –∞—á–∞–∞–ª–∞–≥–¥—Å–∞–Ω–≥“Ø–π");
            updateStatus(
              "SDK –∞—á–∞–∞–ª–∞–≥–¥–∞—Ö–∞–¥ —Ö—ç—Ç —É–¥–∞–∂ –±–∞–π–Ω–∞. –ò–Ω—Ç–µ—Ä–Ω–µ—Ç —Ö–æ–ª–±–æ–ª—Ç–æ–æ —à–∞–ª–≥–∞–Ω–∞ —É—É.",
              "error"
            );
          }
        }, 10000);
      })(document, "script");

      function updateStatus(message, type = "info") {
        const statusEl = document.getElementById("status");
        statusEl.textContent = message;
        statusEl.className = `status ${type}`;
        console.log(`üìä Status: ${message} (${type})`);
      }

      function testChatwootWidget() {
        console.log("üîß Widget –Ω—ç—ç—Ö –æ—Ä–æ–ª–¥–ª–æ–≥–æ...");

        if (window.chatwootSDK) {
          try {
            // ”®”©—Ä ”©”©—Ä –∞—Ä–≥–∞ –æ—Ä–æ–ª–¥–æ—Ö
            if (window.$chatwoot && window.$chatwoot.toggle) {
              window.$chatwoot.toggle("open");
              console.log("‚úÖ $chatwoot.toggle() –∞—à–∏–≥–ª–∞–Ω –Ω—ç—ç–ª—ç—ç");
            } else if (window.chatwootSDK.toggle) {
              window.chatwootSDK.toggle("open");
              console.log("‚úÖ chatwootSDK.toggle() –∞—à–∏–≥–ª–∞–Ω –Ω—ç—ç–ª—ç—ç");
            } else {
              console.warn("‚ö†Ô∏è Toggle —Ñ—É–Ω–∫—Ü –æ–ª–¥—Å–æ–Ω–≥“Ø–π");
              updateStatus("Widget toggle —Ñ—É–Ω–∫—Ü –æ–ª–¥—Å–æ–Ω–≥“Ø–π!", "error");
              return;
            }

            updateStatus("Chatwoot widget –Ω—ç—ç—Ö –∫–æ–º–∞–Ω–¥ –∏–ª–≥—ç—ç–≥–¥–ª—ç—ç!", "success");
          } catch (error) {
            console.error("‚ùå Widget –Ω—ç—ç—Ö—ç–¥ –∞–ª–¥–∞–∞:", error);
            updateStatus("Widget –Ω—ç—ç—Ö—ç–¥ –∞–ª–¥–∞–∞: " + error.message, "error");
          }
        } else {
          console.error("‚ùå Chatwoot SDK –∞—á–∞–∞–ª–∞–≥–¥–∞–∞–≥“Ø–π –±–∞–π–Ω–∞");
          updateStatus(
            "Chatwoot SDK –∞—á–∞–∞–ª–∞–≥–¥–∞–∞–≥“Ø–π –±–∞–π–Ω–∞! –•—É—É–¥—Å—ã–≥ –¥–∞—Ö–∏–Ω –∞—á–∞–∞–ª–∞–Ω–∞ —É—É.",
            "error"
          );
        }
      }

      function testWithCustomData() {
        console.log("üîß Custom data-—Ç–∞–π widget –Ω—ç—ç—Ö –æ—Ä–æ–ª–¥–ª–æ–≥–æ...");

        if (window.chatwootSDK || window.$chatwoot) {
          try {
            const customData = {
              userId: "test-user-" + Date.now(),
              source: "test-page",
              testMode: true,
              timestamp: new Date().toISOString(),
              userAgent: navigator.userAgent,
            };

            console.log("üìù Custom data:", customData);

            // Custom attributes —Ç–æ—Ö–∏—Ä—É—É–ª–∞—Ö
            if (window.$chatwoot && window.$chatwoot.setCustomAttributes) {
              window.$chatwoot.setCustomAttributes(customData);
            } else if (window.chatwootSDK.setCustomAttributes) {
              window.chatwootSDK.setCustomAttributes(customData);
            }

            // Widget –Ω—ç—ç—Ö
            if (window.$chatwoot && window.$chatwoot.toggle) {
              window.$chatwoot.toggle("open");
            } else if (window.chatwootSDK.toggle) {
              window.chatwootSDK.toggle("open");
            }

            updateStatus("Custom data-—Ç–∞–π widget –Ω—ç—ç–≥–¥–ª—ç—ç!", "success");
          } catch (error) {
            console.error("‚ùå Custom data —Ç–æ—Ö–∏—Ä—É—É–ª–∞—Ö–∞–¥ –∞–ª–¥–∞–∞:", error);
            updateStatus(
              "Custom data —Ç–æ—Ö–∏—Ä—É—É–ª–∞—Ö–∞–¥ –∞–ª–¥–∞–∞: " + error.message,
              "error"
            );
          }
        } else {
          updateStatus("Chatwoot SDK –∞—á–∞–∞–ª–∞–≥–¥–∞–∞–≥“Ø–π –±–∞–π–Ω–∞!", "error");
        }
      }

      function checkSDKStatus() {
        console.log("üîç SDK —Å—Ç–∞—Ç—É—Å —à–∞–ª–≥–∞–∂ –±–∞–π–Ω–∞...");

        const checks = {
          "window.chatwootSDK": !!window.chatwootSDK,
          "window.$chatwoot": !!window.$chatwoot,
          "chatwootSDK.toggle": !!(
            window.chatwootSDK && window.chatwootSDK.toggle
          ),
          "$chatwoot.toggle": !!(window.$chatwoot && window.$chatwoot.toggle),
        };

        console.log("üìä SDK —à–∞–ª–≥–∞–ª—Ç—ã–Ω “Ø—Ä –¥“Ø–Ω:", checks);

        if (window.chatwootSDK || window.$chatwoot) {
          updateStatus(
            "‚úÖ Chatwoot SDK –±—ç–ª—ç–Ω –±–∞–π–Ω–∞! Console-–≥ –Ω—ç—ç–∂ –¥—ç–ª–≥—ç—Ä—ç–Ω–≥“Ø–π –º—ç–¥—ç—ç–ª—ç–ª “Ø–∑–Ω—ç “Ø“Ø.",
            "success"
          );

          // Widget —ç–ª–µ–º–µ–Ω—Ç–∏–π–≥ DOM-–æ–æ—Å —Ö–∞–π—Ö
          const widgetElements = document.querySelectorAll(
            '[data-widget="chatwoot"], .woot-widget-holder, #chatwoot-widget'
          );
          console.log("üîç Widget —ç–ª–µ–º–µ–Ω—Ç“Ø“Ø–¥ DOM-–¥:", widgetElements);

          if (widgetElements.length > 0) {
            console.log("‚úÖ Widget —ç–ª–µ–º–µ–Ω—Ç“Ø“Ø–¥ DOM-–¥ –±–∞–π–Ω–∞");
          } else {
            console.warn("‚ö†Ô∏è Widget —ç–ª–µ–º–µ–Ω—Ç“Ø“Ø–¥ DOM-–¥ –æ–ª–¥—Å–æ–Ω–≥“Ø–π");
          }
        } else {
          updateStatus(
            "‚ùå Chatwoot SDK –∞—á–∞–∞–ª–∞–≥–¥–∞–∞–≥“Ø–π –±–∞–π–Ω–∞! Console-–≥ –Ω—ç—ç–∂ –∞–ª–¥–∞–∞–≥ —à–∞–ª–≥–∞–Ω–∞ —É—É.",
            "error"
          );
        }
      }

      // 3 —Å–µ–∫—É–Ω–¥—ã–Ω –¥–∞—Ä–∞–∞ —Å—Ç–∞—Ç—É—Å —à–∞–ª–≥–∞—Ö
      setTimeout(checkSDKStatus, 3000);

      // 5 —Å–µ–∫—É–Ω–¥—ã–Ω –¥–∞—Ä–∞–∞ –¥–∞—Ö–∏–Ω —à–∞–ª–≥–∞—Ö
      setTimeout(() => {
        console.log("üîÑ 5 —Å–µ–∫—É–Ω–¥—ã–Ω –¥–∞—Ä–∞–∞—Ö —à–∞–ª–≥–∞–ª—Ç...");
        checkSDKStatus();
      }, 5000);
    </script>
  </body>
</html>
